{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["\nexport default function itemTemplate(images,getImage) {\n    getImage.innerHTML = '';\n      images.forEach(image => {\n        const card =\n            `<li class=\"gallery-item\">\n  <a class=\"gallery-link\" href=\"${image.largeImageURL}\">\n    <img class=\"gallery-image\" src=\"${image.webformatURL}\" alt=\"${image.tags}\" />\n  </a>\n   <div class=\"image-details\">\n                    <p>Likes: ${image.likes}</p>\n                    <p>Views: ${image.views}</p>\n                    <p>Comments: ${image.comments}</p>\n                    <p>Downloads: ${image.downloads}</p>\n                </div>\n</li>`;\n        getImage.innerHTML += card;\n    })\n}\n    \n \n    \n\n\n export function displayImages(image) {\n         return `<ul class='gallery'><li class=\"gallery-item\">\n     <img class=\"gallery-image\" src=\"${image.previewURL}\" alt=\"#\"/></li></ul>`\n     };\n     function renderImage(data) {\n         const markup = data.map(displayImages).join('');\n\n         getImage.innerHTML = `<ul class='gallery'>${markup}</ul>`\n };\n\n","\nimport axios from \"axios\";\n // HTTP request\nexport default async function getPostsByUser(query, page = 1, perPage = 20) {\n    const BASE_URL = \"https://pixabay.com\";\n    const END_POINT = '/api/';\n    const API_KEY = '42305658-75508782eac06a666c1fb928b';\n\n    const params = {\n        key: API_KEY,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: 'true',\n        q: query,\n        per_page: perPage,\n          page: page,\n    \n    };\n\n\nconst url = `${BASE_URL}${END_POINT}?${new URLSearchParams(params)}`;\n  const response = await axios.get(url);\n return response.data\n    };\n","// iziToast import\nimport iziToast from \"izitoast\";\n// additional iziToast import\nimport \"izitoast/dist/css/iziToast.min.css\";\n//  SimpleLightbox import\nimport SimpleLightbox from \"simplelightbox\";\n// additional SimpleLightbox import\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n// import render function part1\nimport {displayImages} from './js/render-functions'\n//  import render function part2\nimport itemTemplate from './js/render-functions';\n\n\nimport getPostsByUser from './js/pixabay-api';\n\nconst searchForm = document.querySelector('.js-search-form');\nconst getImage = document.querySelector(\".gallery\");\nconst loader = document.querySelector('.loader');\nconst loadMore = document.querySelector('.load-more');\nlet page = 1; \nconst perPage = 20; \nlet totalHits = 0; // Total number of hits returned by the backend\nlet query\nsearchForm.addEventListener('submit', async e => {\n    e.preventDefault();\n   query = e.target.elements.search.value.trim();\n    loader.style.display = 'none';\n//check the input line is not empty\n     if (!query) {\n\n        return iziToast.warning({\n            title: 'Warning',\n            message: 'Please enter a search query',\n            position: 'topCenter'\n        });\n    }\n\n // Show the loading element before starting the HTTP request\n    loader.style.display = 'block';\n     try {\n        const data = await getPostsByUser(query, page, perPage);\n        handleImageData(data);\n    } catch (error) {\n        handleRequestError(error);\n    }\n});\n   \n   function handleImageData(data) {\n      loader.style.display = 'none';\n    totalHits = data.totalHits; \n    if (data.hits.length === 0) {\n        iziToast.error({\n            title: 'Error',\n            message: 'Sorry, there are no images matching your search query. Please try again!',\n            position: 'topCenter'\n        });\n    } else {\n        // Append new images to the existing ones\n        itemTemplate(data.hits, getImage, false);\n        const lightbox = new SimpleLightbox(\".gallery a\", {\n            captionsData: \"alt\",\n            captionDelay: 250,\n            captionPosition: 'bottom'\n        });\n      \n        // Show or hide the \"Load more\" button based on totalHits and displayed images\n        if (totalHits <= page * perPage) {\n            loadMore.style.display = 'none';\n            iziToast.info({\n                title: 'Info',\n                message: \"We're sorry, but you've reached the end of search results.\",\n                position: 'topCenter'\n            });\n        } else {\n            loadMore.style.display = 'block';\n        }\n    }\n}\n\nfunction handleRequestError(error) {\n    loader.style.display = 'none';\n    iziToast.error({\n        title: 'Error',\n        message: 'There was a problem with the fetch operation. Please try again later.',\n        position: 'topCenter'\n    });\n    console.error(error);\n    }\n    \n    loadMore.addEventListener('click', async () => {\n        try {\n        const data = await getPostsByUser(query, ++page, perPage, true);\n        const newImages = data.hits;\n        if (newImages.length > 0) {\n            itemTemplate(newImages, getImage);\n            const lightbox = new SimpleLightbox(\".gallery a\", {\n                captionsData: \"alt\",\n                captionDelay: 250,\n                captionPosition: 'bottom'\n            });\n           \n        }\n        // Show or hide the \"Load more\" button based on totalHits and displayed images\n        if (totalHits <= page * perPage) {\n            loadMore.style.display = 'none';\n            iziToast.info({\n                title: 'Info',\n                message: \"We're sorry, but you've reached the end of search results.\",\n                position: 'topCenter'\n            });\n        }\n    } catch (error) {\n        handleRequestError(error);\n    }\n});\n"],"names":["itemTemplate","images","getImage","image","card","getPostsByUser","query","page","perPage","BASE_URL","END_POINT","params","url","axios","searchForm","loader","loadMore","totalHits","e","iziToast","data","handleImageData","error","handleRequestError","SimpleLightbox","newImages","lightbox"],"mappings":"+vBACe,SAASA,EAAaC,EAAOC,EAAU,CAClDA,EAAS,UAAY,GACnBD,EAAO,QAAQE,GAAS,CACtB,MAAMC,EACF;AAAA,kCACsBD,EAAM,aAAa;AAAA,sCACfA,EAAM,YAAY,UAAUA,EAAM,IAAI;AAAA;AAAA;AAAA,gCAG5CA,EAAM,KAAK;AAAA,gCACXA,EAAM,KAAK;AAAA,mCACRA,EAAM,QAAQ;AAAA,oCACbA,EAAM,SAAS;AAAA;AAAA,OAG3CD,EAAS,WAAaE,CAC9B,CAAK,CACL,CCfe,eAAeC,EAAeC,EAAOC,EAAO,EAAGC,EAAU,GAAI,CACxE,MAAMC,EAAW,sBACXC,EAAY,QAGZC,EAAS,CACX,IAHY,qCAIZ,WAAY,QACZ,YAAa,aACb,WAAY,OACZ,EAAGL,EACH,SAAUE,EACR,KAAMD,CAEhB,EAGMK,EAAM,GAAGH,CAAQ,GAAGC,CAAS,IAAI,IAAI,gBAAgBC,CAAM,CAAC,GAEjE,OADkB,MAAME,EAAM,IAAID,CAAG,GACrB,IACjB,CCPA,MAAME,EAAa,SAAS,cAAc,iBAAiB,EACrDZ,EAAW,SAAS,cAAc,UAAU,EAC5Ca,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAW,SAAS,cAAc,YAAY,EACpD,IAAIT,EAAO,EACX,MAAMC,EAAU,GAChB,IAAIS,EAAY,EACZX,EACJQ,EAAW,iBAAiB,SAAU,MAAMI,GAAK,CAK5C,GAJDA,EAAE,eAAc,EACjBZ,EAAQY,EAAE,OAAO,SAAS,OAAO,MAAM,OACtCH,EAAO,MAAM,QAAU,OAElB,CAACT,EAEF,OAAOa,EAAS,QAAQ,CACpB,MAAO,UACP,QAAS,8BACT,SAAU,WACtB,CAAS,EAILJ,EAAO,MAAM,QAAU,QACtB,GAAI,CACD,MAAMK,EAAO,MAAMf,EAAeC,EAAOC,EAAMC,CAAO,EACtDa,EAAgBD,CAAI,CACvB,OAAQE,EAAO,CACZC,EAAmBD,CAAK,CAC3B,CACL,CAAC,EAEE,SAASD,EAAgBD,EAAM,CAC5BL,EAAO,MAAM,QAAU,OACzBE,EAAYG,EAAK,UACbA,EAAK,KAAK,SAAW,EACrBD,EAAS,MAAM,CACX,MAAO,QACP,QAAS,2EACT,SAAU,WACtB,CAAS,GAGDnB,EAAaoB,EAAK,KAAMlB,CAAe,EACtB,IAAIsB,EAAe,aAAc,CAC9C,aAAc,MACd,aAAc,IACd,gBAAiB,QAC7B,CAAS,EAGGP,GAAaV,EAAOC,GACpBQ,EAAS,MAAM,QAAU,OACzBG,EAAS,KAAK,CACV,MAAO,OACP,QAAS,6DACT,SAAU,WAC1B,CAAa,GAEDH,EAAS,MAAM,QAAU,QAGrC,CAEA,SAASO,EAAmBD,EAAO,CAC/BP,EAAO,MAAM,QAAU,OACvBI,EAAS,MAAM,CACX,MAAO,QACP,QAAS,wEACT,SAAU,WAClB,CAAK,EACD,QAAQ,MAAMG,CAAK,CAClB,CAEDN,EAAS,iBAAiB,QAAS,SAAY,CAC3C,GAAI,CAEJ,MAAMS,GADO,MAAMpB,EAAeC,EAAO,EAAEC,EAAMC,EAAS,EAAI,GACvC,KACvB,GAAIiB,EAAU,OAAS,EAAG,CACtBzB,EAAayB,EAAWvB,CAAQ,EAChC,MAAMwB,EAAW,IAAIF,EAAe,aAAc,CAC9C,aAAc,MACd,aAAc,IACd,gBAAiB,QACjC,CAAa,CAEJ,CAEGP,GAAaV,EAAOC,IACpBQ,EAAS,MAAM,QAAU,OACzBG,EAAS,KAAK,CACV,MAAO,OACP,QAAS,6DACT,SAAU,WAC1B,CAAa,EAER,OAAQG,EAAO,CACZC,EAAmBD,CAAK,CAC3B,CACL,CAAC"}