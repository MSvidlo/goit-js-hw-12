{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["\n function itemTemplate(hit) {\n  return `<li class=\"gallery-item\">\n  <a class=\"gallery-link\" href=\"${hit.largeImageURL}\">\n    <img class=\"gallery-image\" src=\"${hit.webformatURL}\" alt=\"${hit.tags}\" />\n  </a>\n   <div class=\"image-details\">\n                    <p>Likes: ${hit.likes}</p>\n                    <p>Views: ${hit.views}</p>\n                    <p>Comments: ${hit.comments}</p>\n                    <p>Downloads: ${hit.downloads}</p>\n                </div>\n</li>`;\n};\n    \n \n    \n\n\nexport   function itemsTamplate(hits) {\n  return hits.map(itemTemplate).join('');\n};\n","\nimport axios from \"axios\";\n // HTTP request\nexport default async function getPostsByUser(query,page) {\n    const BASE_URL = \"https://pixabay.com\";\n    const END_POINT = '/api/';\n    const API_KEY = '42305658-75508782eac06a666c1fb928b';\n\n    const params = {\n        key: API_KEY,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: 'true',\n        q: query,\n        per_page: 15,\n        page: page\n    \n    };\n\n\nconst url = `${BASE_URL}${END_POINT}?${new URLSearchParams(params)}`;\n  const response = await axios.get(url);\n return response.data\n    };\n","// iziToast import\nimport iziToast from \"izitoast\";\n// additional iziToast import\nimport \"izitoast/dist/css/iziToast.min.css\";\n//  SimpleLightbox import\nimport SimpleLightbox from \"simplelightbox\";\n// additional SimpleLightbox import\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nimport { itemsTamplate } from './js/render-functions';\nimport getPostsByUser from './js/pixabay-api';\n\nconst searchForm = document.querySelector('.js-search-form');\nconst getImage = document.querySelector(\".gallery\");\nconst loader = document.querySelector('.js-loader');\nconst loadMore = document.querySelector('.js-btn-load');\n // Total number of hits returned by the backend\n\n\nlet query;\nlet page;\nlet maxImage;\n\n\n// ================================================\nsearchForm.addEventListener('submit', onFormSubmit);\nloadMore.addEventListener('click', onLoadMoreClick);\n// ================================================\nasync function onFormSubmit(e){\n   e.preventDefault();\n   query = e.target.elements.search.value.trim();\n    page = 1;\n    showLoader();\n     if (!query) {\n        showError('Sorry, there are no images matching your search query. Please try again!') \n    };  \n    \n    const data = await getPostsByUser(query, page);\n    console.log(data);\n\n    maxImage = Math.ceil(data.totalHits / 15);\n    getImage.innerHTML = '';\n    \n    renderImages(data.hits);\n    hideLoader();\n    checkVisibleBtnStatus();\n    e.target.reset()\n};\n//=====================================  \n\nasync function onLoadMoreClick() {\n    page += 1;\n     if (!query) {\n\n        return iziToast.warning({\n            title: 'Warning',\n            message: 'Please enter a search query',\n            position: 'topCenter'\n        });\n    };  \n\n    showLoader();\n    const data = await getPostsByUser(query,page);\n   \n    renderImages(data.hits);\n    hideLoader();\n    checkVisibleBtnStatus();\n   \n}\n\n\n//===============================================   \nfunction renderImages(hits) {\n    const markup = itemsTamplate(hits);\n    getImage.insertAdjacentHTML('beforeend', markup)\n};\n//==========================================\n\nfunction showLoadBtn()\n{\n    loadMore.classList.remove('hidden');\n}\n\nfunction hideLoadBtn()\n\n{\n    loadMore.classList.add('hidden');\n}\n\n\nfunction showLoader() {\n    loader.classList.remove('hidden');\n};\n\nfunction hideLoader() {\n     loader.classList.add('hidden');\n}\n\n\nfunction checkVisibleBtnStatus()\n{\n    if (page>= maxImage){  hideLoadBtn();\n    } else {\n        showLoadBtn();\n    }\n\n};\n      \nfunction showError(msg) { iziToast.error({\n                    title: 'Error',\n                    message: msg,\n                    position: 'topCenter'\n                });\n    \n}"],"names":["itemTemplate","hit","itemsTamplate","hits","getPostsByUser","query","page","BASE_URL","END_POINT","params","url","axios","searchForm","getImage","loader","loadMore","maxImage","onFormSubmit","onLoadMoreClick","showLoader","showError","data","renderImages","hideLoader","checkVisibleBtnStatus","iziToast","markup","showLoadBtn","hideLoadBtn","msg"],"mappings":"6vBACC,SAASA,EAAaC,EAAK,CAC1B,MAAO;AAAA,kCACyBA,EAAI,aAAa;AAAA,sCACbA,EAAI,YAAY,UAAUA,EAAI,IAAI;AAAA;AAAA;AAAA,gCAGxCA,EAAI,KAAK;AAAA,gCACTA,EAAI,KAAK;AAAA,mCACNA,EAAI,QAAQ;AAAA,oCACXA,EAAI,SAAS;AAAA;AAAA,MAGjD,CAMS,SAASC,EAAcC,EAAM,CACpC,OAAOA,EAAK,IAAIH,CAAY,EAAE,KAAK,EAAE,CACvC,CClBe,eAAeI,EAAeC,EAAMC,EAAM,CACrD,MAAMC,EAAW,sBACXC,EAAY,QAGZC,EAAS,CACX,IAHY,qCAIZ,WAAY,QACZ,YAAa,aACb,WAAY,OACZ,EAAGJ,EACH,SAAU,GACV,KAAMC,CAEd,EAGMI,EAAM,GAAGH,CAAQ,GAAGC,CAAS,IAAI,IAAI,gBAAgBC,CAAM,CAAC,GAEjE,OADkB,MAAME,EAAM,IAAID,CAAG,GACrB,IACjB,CCXA,MAAME,EAAa,SAAS,cAAc,iBAAiB,EACrDC,EAAW,SAAS,cAAc,UAAU,EAC5CC,EAAS,SAAS,cAAc,YAAY,EAC5CC,EAAW,SAAS,cAAc,cAAc,EAItD,IAAIV,EACAC,EACAU,EAIJJ,EAAW,iBAAiB,SAAUK,CAAY,EAClDF,EAAS,iBAAiB,QAASG,CAAe,EAElD,eAAeD,EAAa,EAAE,CAC3B,EAAE,eAAc,EAChBZ,EAAQ,EAAE,OAAO,SAAS,OAAO,MAAM,OACtCC,EAAO,EACPa,IACMd,GACFe,EAAU,0EAA0E,EAGxF,MAAMC,EAAO,MAAMjB,EAAeC,EAAOC,CAAI,EAC7C,QAAQ,IAAIe,CAAI,EAEhBL,EAAW,KAAK,KAAKK,EAAK,UAAY,EAAE,EACxCR,EAAS,UAAY,GAErBS,EAAaD,EAAK,IAAI,EACtBE,IACAC,IACA,EAAE,OAAO,MAAO,CACpB,CAGA,eAAeN,GAAkB,CAE5B,GADDZ,GAAQ,EACH,CAACD,EAEF,OAAOoB,EAAS,QAAQ,CACpB,MAAO,UACP,QAAS,8BACT,SAAU,WACtB,CAAS,EAGLN,IACA,MAAME,EAAO,MAAMjB,EAAeC,EAAMC,CAAI,EAE5CgB,EAAaD,EAAK,IAAI,EACtBE,IACAC,GAEJ,CAIA,SAASF,EAAanB,EAAM,CACxB,MAAMuB,EAASxB,EAAcC,CAAI,EACjCU,EAAS,mBAAmB,YAAaa,CAAM,CACnD,CAGA,SAASC,GACT,CACIZ,EAAS,UAAU,OAAO,QAAQ,CACtC,CAEA,SAASa,GAET,CACIb,EAAS,UAAU,IAAI,QAAQ,CACnC,CAGA,SAASI,GAAa,CAClBL,EAAO,UAAU,OAAO,QAAQ,CACpC,CAEA,SAASS,GAAa,CACjBT,EAAO,UAAU,IAAI,QAAQ,CAClC,CAGA,SAASU,GACT,CACQlB,GAAOU,EAAYY,IAEnBD,GAGR,CAEA,SAASP,EAAUS,EAAK,CAAEJ,EAAS,MAAM,CACrB,MAAO,QACP,QAASI,EACT,SAAU,WAC9B,CAAiB,CAEjB"}